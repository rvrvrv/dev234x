'use strict';window.onload=function(){function a(){f.prop('disabled',!1),f.html('<i class="fa fa-fighter-jet"></i>&nbsp;Compare</button>')}function b(){for(var k=void 0,l=0;4>l;l++)h[1][l]>h[2][l]?k=$('table tr:nth-child('+(l+3)+')').children()[1]:h[2][l]>h[1][l]&&(k=$('table tr:nth-child('+(l+3)+')').children()[2]),$(k).addClass('winner'),g.fadeTo(300,1),a()}function c(k){$('#ship'+k+'Name').html($('#ship'+k).children(':selected').text()),j[k]=[+h[k].cost_in_credits,+h[k].max_atmosphering_speed,+h[k].cargo_capacity,+h[k].passengers],h[k]=j[k],j[k]=j[k].map(function(l){return l.toLocaleString()}),$('#ship'+k+'Cost').html(j[k][0]),$('#ship'+k+'Speed').html(j[k][1]),$('#ship'+k+'Cargo').html(j[k][2]),$('#ship'+k+'Passengers').html(j[k][3])}function d(k){fetch('https://swapi.co/api/starships/'+$('#ship'+k).val()).then(function(l){return l.json()}).then(function(l){h[k]=l,c(k),1===k?d(2):b()}).catch(function(l){console.error(l),$('.results').after('<h5 class="error">An error has occurred. Please try again.</h5>'),a()})}var f=$('#compareBtn'),g=$('#statsTbl').find('td'),h=[],j=[];f.click(function(){$('#ship1Name').html()===$('#ship1').children(':selected').text()&&$('#ship2Name').html()===$('#ship2').children(':selected').text()||(f.prop('disabled',!0),f.html('<i class="fa fa-spinner fa-spin fa-fw"></i>&nbsp;Loading'),$('.error')&&$('.error').remove(),g.fadeTo(300,0),setTimeout(function(){g.removeClass('winner'),d(1)},300))})};
